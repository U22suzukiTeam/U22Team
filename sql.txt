CREATE DATABASE U22;
use U22;
CREATE TABLE user (
  userID INT NOT NULL AUTO_INCREMENT COMMENT 'ユーザーID（主キー）',
  accountname VARCHAR(15) NOT NULL COMMENT 'アカウント名',
  username VARCHAR(20) NOT NULL COMMENT 'ユーザー名',
  password VARCHAR(60) NOT NULL COMMENT 'パスワード（ハッシュ）',
  delflg BIT(1) NOT NULL DEFAULT b'0' COMMENT '削除フラグ',
  PRIMARY KEY (userID)
)engine=InnoDB DEFAULT CHARSET = utf8 COLLATE = utf8_unicode_ci;

CREATE TABLE room (
  roomID INT NOT NULL AUTO_INCREMENT COMMENT 'ルームID',
  address VARCHAR(34) NOT NULL COMMENT 'ページのURL',
  delflg BIT(1) NOT NULL DEFAULT b'0' COMMENT '削除フラグ',
  PRIMARY KEY (roomID)
)engine=InnoDB DEFAULT CHARSET = utf8 COLLATE = utf8_unicode_ci;

CREATE TABLE destination (
  destinationID INT NOT NULL AUTO_INCREMENT COMMENT '目的地ID（主キー）',
  roomID INT NOT NULL COMMENT 'ルームID（room:roomID）',
  latitude DOUBLE(8,6) NOT NULL DEFAULT '35.651947' COMMENT '緯度',
  longitude DOUBLE(9,6) NOT NULL DEFAULT '139.732835' COMMENT '経度',
  delflg BIT(1) NOT NULL DEFAULT b'0' COMMENT '削除フラグ',
  PRIMARY KEY (destinationID),
  FOREIGN  KEY (roomID) REFERENCES room(roomID)
)engine=InnoDB DEFAULT CHARSET = utf8 COLLATE = utf8_unicode_ci;

CREATE TABLE member (
  memberID INT NOT NULL AUTO_INCREMENT COMMENT 'メンバーID（主キー）',
  userID INT NOT NULL COMMENT 'ユーザーID（user:userID）',
  roomID INT NOT NULL COMMENT 'ルームID（room:roomID）',
  delflg BIT(1) NOT NULL DEFAULT b'0' COMMENT '削除フラグ',
  PRIMARY KEY (memberID),
  FOREIGN KEY (userID) REFERENCES user(userID),
  FOREIGN KEY (roomID) REFERENCES room(roomID)
)engine=InnoDB DEFAULT CHARSET = utf8 COLLATE = utf8_unicode_ci;

CREATE TABLE chat (
  chatID INT NOT NULL AUTO_INCREMENT COMMENT 'チャットID（主キー）',
  memberID INT NOT NULL COMMENT 'メンバーID（member:memberID）',
  contents VARCHAR(140) NOT NULL COMMENT 'チャット内容',
  timestamp DATETIME NOT NULL COMMENT 'タイムスタンプ',
  PRIMARY KEY (chatID),
  FOREIGN KEY (memberID) REFERENCES member(memberID)
)engine=InnoDB DEFAULT CHARSET = utf8 COLLATE = utf8_unicode_ci;

CREATE TABLE point (
  pointID INT NOT NULL AUTO_INCREMENT COMMENT '位置情報ID（主キー）',
  memberID INT NOT NULL COMMENT 'メンバーID（member:memberID）',
  latitude DOUBLE(8,6) NOT NULL COMMENT '緯度',
  longitude DOUBLE(9,6) NOT NULL COMMENT '経度',
  delflg BIT(1) NOT NULL DEFAULT b'0' COMMENT '削除フラグ',
  PRIMARY KEY (pointID),
  FOREIGN KEY (memberID) REFERENCES member(memberID)
)engine=InnoDB DEFAULT CHARSET = utf8 COLLATE = utf8_unicode_ci;
